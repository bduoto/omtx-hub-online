# OMTX-Hub Production Configuration
# Distinguished Engineer Implementation - Production-ready multi-tenant configuration

# === EXTERNAL SERVICE INTEGRATION ===
# JWT Authentication (from your main app)
JWT_SECRET=your-main-app-jwt-secret-here
JWT_ALGORITHM=HS256

# External Services
AUTH_SERVICE_URL=https://auth.yourapp.com
BILLING_SERVICE_URL=https://billing.yourapp.com
ANALYTICS_SERVICE_URL=https://analytics.yourapp.com

# Webhook Configuration
WEBHOOK_SIGNING_SECRET=your-webhook-secret-here
WEBHOOK_TIMEOUT_SECONDS=30
WEBHOOK_MAX_RETRIES=3

# === USER ISOLATION & SECURITY ===
# Multi-tenant Configuration
ENABLE_USER_ISOLATION=true
DEFAULT_USER_TIER=free
DEVELOPMENT_MODE=false

# API Authentication
API_KEY_AUTH_ENABLED=true
SESSION_COOKIE_NAME=session_id

# === CONCURRENCY & RATE LIMITING ===
# Global Limits
MAX_GLOBAL_CONCURRENT_JOBS=100
SYSTEM_LOAD_THRESHOLD=0.8

# Rate Limiting
REDIS_URL=redis://redis:6379/0
ENABLE_RATE_LIMITING=true
ENABLE_DISTRIBUTED_RATE_LIMITING=true

# === GCP CONFIGURATION ===
# Core GCP Settings
GCP_PROJECT_ID=your-production-project
GCP_REGION=us-central1
GCS_BUCKET_NAME=omtx-production
FIRESTORE_DATABASE=(default)

# Cloud Run Configuration
CLOUD_RUN_SERVICE_URL=https://boltz2-service-your-project.us-central1.run.app
CLOUD_RUN_JOB_NAME=boltz2-batch
CLOUD_RUN_MAX_INSTANCES=50

# === GPU & COMPUTE OPTIMIZATION ===
# L4 GPU Configuration
GPU_TYPE=L4
MAX_VRAM_GB=22
OPTIMIZATION_LEVEL=aggressive

# Performance Settings
ENABLE_FP16=true
ENABLE_GRADIENT_CHECKPOINTING=true
ENABLE_FLASH_ATTENTION=true
ENABLE_TF32=true

# === STORAGE CONFIGURATION ===
# Storage Quotas (GB)
STORAGE_QUOTA_FREE=1
STORAGE_QUOTA_BASIC=10
STORAGE_QUOTA_PRO=100
STORAGE_QUOTA_ENTERPRISE=1000

# File Management
MAX_FILE_SIZE_MB=100
ALLOWED_FILE_TYPES=json,txt,pdb,sdf,mol
ENABLE_FILE_ENCRYPTION=true

# === MONITORING & OBSERVABILITY ===
# Logging
LOG_LEVEL=INFO
ENABLE_STRUCTURED_LOGGING=true
LOG_FORMAT=json

# Tracing
ENABLE_TRACING=true
JAEGER_ENDPOINT=http://jaeger:14268/api/traces
TRACE_SAMPLE_RATE=0.1

# Metrics
ENABLE_CUSTOM_METRICS=true
METRICS_EXPORT_INTERVAL=60

# Health Checks
HEALTH_CHECK_INTERVAL=30
ENABLE_DEEP_HEALTH_CHECKS=true

# === EVENT STREAMING ===
# Pub/Sub Configuration
PUBSUB_ENABLED=true
PUBSUB_TOPIC=projects/your-project/topics/omtx-events
PUBSUB_SUBSCRIPTION=projects/your-project/subscriptions/omtx-events-sub

# Eventarc
EVENTARC_ENABLED=true
EVENTARC_SERVICE_ACCOUNT=eventarc-sa@your-project.iam.gserviceaccount.com

# === DATABASE CONFIGURATION ===
# Firestore Settings
FIRESTORE_MAX_CONNECTIONS=20
FIRESTORE_TIMEOUT_SECONDS=30
ENABLE_FIRESTORE_EMULATOR=false

# Connection Pooling
DB_POOL_SIZE=20
DB_POOL_TIMEOUT=30

# === SECURITY CONFIGURATION ===
# CORS Settings
CORS_ORIGINS=https://yourapp.com,https://api.yourapp.com
CORS_ALLOW_CREDENTIALS=true

# Security Headers
ENABLE_SECURITY_HEADERS=true
ENABLE_CSRF_PROTECTION=true

# Data Encryption
ENABLE_DATA_ENCRYPTION_AT_REST=true
ENCRYPTION_KEY_ID=projects/your-project/locations/global/keyRings/omtx/cryptoKeys/data

# === PERFORMANCE TUNING ===
# FastAPI Settings
WORKERS=4
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=50
TIMEOUT=300

# Async Settings
MAX_ASYNC_CONNECTIONS=100
ASYNC_TIMEOUT=60

# === COST OPTIMIZATION ===
# Resource Management
ENABLE_AUTO_SCALING=true
MIN_INSTANCES=1
MAX_INSTANCES=50
TARGET_CPU_UTILIZATION=70

# Cost Tracking
ENABLE_COST_TRACKING=true
COST_ALERT_THRESHOLD_USD=1000
BILLING_EXPORT_DATASET=your-project.billing_export

# === BACKUP & DISASTER RECOVERY ===
# Backup Configuration
ENABLE_AUTOMATED_BACKUPS=true
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *

# Disaster Recovery
ENABLE_MULTI_REGION=false
BACKUP_REGION=us-east1

# === FEATURE FLAGS ===
# Experimental Features
ENABLE_EXPERIMENTAL_FEATURES=false
ENABLE_BETA_FEATURES=true

# Migration Flags
ENABLE_LEGACY_API_SUPPORT=true
ENABLE_MODAL_COMPATIBILITY=false

# === INTEGRATION TESTING ===
# Test Configuration
ENABLE_INTEGRATION_TESTS=true
TEST_USER_ID=test-user-12345
TEST_API_KEY=test-key-67890

# === ALERTING ===
# Alert Configuration
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
PAGERDUTY_INTEGRATION_KEY=your-pagerduty-key
EMAIL_ALERTS_ENABLED=true
ALERT_EMAIL=alerts@yourcompany.com

# Error Thresholds
ERROR_RATE_THRESHOLD=0.05
LATENCY_THRESHOLD_MS=5000
AVAILABILITY_THRESHOLD=0.99

# === COMPLIANCE ===
# Data Governance
ENABLE_AUDIT_LOGGING=true
DATA_RETENTION_DAYS=365
ENABLE_GDPR_COMPLIANCE=true

# Privacy
ENABLE_DATA_ANONYMIZATION=true
PII_DETECTION_ENABLED=true

# === DEVELOPMENT OVERRIDES ===
# Development Settings (only for staging)
# DEVELOPMENT_MODE=true
# LOG_LEVEL=DEBUG
# ENABLE_DEBUG_ENDPOINTS=true
# DISABLE_RATE_LIMITING=true
